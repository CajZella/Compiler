# 词法分析
## 编码前的设计

词法分析阶段负责将源代码字符串分解成token。

词法分析一般有3种方式：

1. 有限状态自动机（Finite State Machine，FSM）：
2. 正则表达式：根据不同token的模式（关键字、标识符、运算符、数字）进行匹配从而识别token
3. 使用专门的词法分析工具：如Lex、ANTLR。

考虑到本课程实验采用Sysy语言，采用有限状态自动机实现。首先判断是不是注释，过滤掉注释后，先判断双分界符，再判断单分界符。

词法分析token是存入数据结构还是提供接口给语法分析，随取随用？=>代码量、语法分析时需要考虑上下文=>前者

## 编码后的修改
整体词法分析的思路同上，在编码细节处理上做了一些修改：
1. 为输入输出流写了一个单例模式进行封装，方便后续的读写，输入的时候采用按行读取，pos记录位置。
2. 将过滤注释和空白字符作为一个单独的方法，将有限状态自动机部分分成`ignoreBlank`和`nextToken`两个方法，对方法职责进行划分。
3. `token`分为双分界符、单分界符、无符号整数、标识符、字符串常量几类，首先进行正则表达式匹配将token划分到相应的类别，再做具体的判断。

debug:
1. "\s"表示空字符可用于正则表达式匹配，但' '=='\s'是false。